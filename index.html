<!DOCTYPE html>

<html class="scroll-smooth" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<meta name="description" content="EcoAI Framework - Interactive Dashboard: explore the four EcoAI domains, GreenComp competences, SDG alignment, and educational methodologies for sustainability."/>
<title>EcoAI Framework - Interactive Dashboard</title>

<!-- Canonical & hreflang -->
<link rel="canonical" href="https://www.ecoaiframework.com/">

<!-- Homepage EN/IT -->
<link rel="alternate" href="https://www.ecoaiframework.com/" hreflang="en">
<link rel="alternate" href="https://www.ecoaiframework.com/it/" hreflang="it">

<!-- Literacies EN/IT -->
<link rel="alternate" href="https://www.ecoaiframework.com/literacies.html" hreflang="en">
<link rel="alternate" href="https://www.ecoaiframework.com/it/literacies.html" hreflang="it">

<!-- Default -->
<link rel="alternate" href="https://www.ecoaiframework.com/" hreflang="x-default">
<!-- Chosen Palette: Soft Neutrals with Eco Accents -->
<!-- Application Structure Plan: The SPA is designed as an interactive dashboard with a thematic, non-linear structure. A sticky navigation bar allows users to jump to key sections: an overview, an interactive exploration of the four core framework quadrants, a dynamic competence level viewer, a visualization of SDG alignment, and a summary of the methodology. This structure was chosen to deconstruct the dense academic report into digestible, interactive modules, prioritizing user exploration and understanding over the linear format of the source document. Key interactions include clickable cards to reveal detailed quadrant information and dynamic charts that update based on user selection, fostering an engaging and intuitive user flow. -->
<!-- Visualization & Content Choices: 
        - Report Info: Core four quadrants of the EcoAI framework. Goal: Organize & Inform. Viz/Method: 2x2 interactive grid of cards built with HTML/Tailwind. Interaction: Click to expand/collapse detailed descriptions and sub-domains. Justification: Visually represents the core structure and allows progressive disclosure of information. Library: Vanilla JS.
        - Report Info: Competence levels (Basic, Intermediate, Advanced, Critical) and their link to GreenComp. Goal: Compare & Inform. Viz/Method: A radar chart (Chart.js/Canvas) to show the relationship between quadrants and GreenComp areas, plus a dynamic text block. Interaction: User selects a competence, and the text block updates to show the definitions for all four levels. Justification: The radar chart provides a holistic comparison, while the interactive text allows for focused exploration of specific competencies. Library: Chart.js, Vanilla JS.
        - Report Info: Alignment with UN SDGs. Goal: Inform & Show Relationships. Viz/Method: A donut chart (Chart.js/Canvas) for a quantitative overview and an interactive grid of SDG icons (HTML/CSS/Tailwind). Interaction: Hovering over an SDG icon reveals a tooltip with related EcoAI sub-domains. Justification: The chart offers a quick summary of impact, while the interactive grid provides a more detailed, engaging exploration of the connections. Library: Chart.js, Vanilla JS.
        - Report Info: Research methodology population. Goal: Inform. Viz/Method: A simple pie chart (Chart.js/Canvas). Justification: Adds a visual element to a text-heavy section, making the target demographic information more accessible. Library: Chart.js.
    -->
<!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<link href="https://fonts.googleapis.com" rel="preconnect"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&amp;display=swap" rel="stylesheet"/>
<style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #F8F7F4;
            color: #333;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 400px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }
        .sdg-card {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .sdg-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
    </style>
</head>
<body class="antialiased">
<header class="bg-white/80 backdrop-blur-lg sticky top-0 z-50 shadow-sm">
<nav class="mx-auto max-w-screen-2xl px-4 md:px-6 py-4 flex justify-between items-center relative">
<h1 class="text-2xl font-bold text-green-800">EcoAI Framework</h1>
<a href="it/index.html"
   class="text-sm px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700
          absolute right-6 top-1/2 -translate-y-1/2">
  IT
</a>
<div class="hidden md:flex space-x-8 absolute left-1/2 -translate-x-1/2">
<a class="text-gray-600 hover:text-green-700 transition" href="#panoramica">Overview</a>
<a class="text-gray-600 hover:text-green-700 transition" href="#framework">The Framework</a>
<a class="text-gray-600 hover:text-green-700 transition" href="#competenze">Competences</a>
<a class="text-gray-600 hover:text-green-700 transition" href="#impatto-globale">Global Impact</a>
<a class="text-gray-600 hover:text-green-700 transition" href="#metodologia">Methodology</a>
</div>
<button class="md:hidden text-gray-600 focus:outline-none" id="mobile-menu-button">
<svg class="w-6 h-6" fill="none" stroke="currentColor" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M4 6h16M4 12h16m-7 6h7" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path></svg>
</button>
</nav>
<div class="hidden md:hidden px-6 pb-4 space-y-2" id="mobile-menu">
<a class="block text-gray-600 hover:text-green-700 transition" href="#panoramica">Overview</a>
<a class="block text-gray-600 hover:text-green-700 transition" href="#framework">The Framework</a>
<a class="block text-gray-600 hover:text-green-700 transition" href="#competenze">Competences</a>
<a class="block text-gray-600 hover:text-green-700 transition" href="#impatto-globale">Global Impact</a>
<a class="block text-gray-600 hover:text-green-700 transition" href="#metodologia">Methodology</a>
</div>
</header>
<main class="max-w-[1500px] mx-auto px-1 md:px-2">
<section class="py-4 bg-white" id="panoramica">
<div class="mx-auto max-w-screen-2xl px-4 md:px-6 text-center">
<h2 class="text-4xl font-bold mb-4 text-gray-800">EcoAI Framework: A Pedagogical Model for the Anthropocene</h2>
<p class="text-lg text-gray-600 max-w-5xl mx-auto mb-12">The EcoAI Framework proposes an interdisciplinary approach to integrate Ecoliteracy and Artificial Intelligence (AI) into civic education in secondary schools, shaping a new generation of eco-technological citizens.</p>
<div class="grid md:grid-cols-3 gap-8 text-left">
<div class="bg-gray-50 p-6 rounded-lg shadow-sm border border-gray-200">
<h3 class="text-xl font-semibold mb-3 text-green-800"> Research Objectives</h3>
<ul class="space-y-2 text-gray-700 list-disc list-inside">
<li>Explore students' perceptions of sustainability and AI.</li>
<li>Analyze the intersection between environmental and digital literacy.</li>
<li>Develop an integrated pedagogical model for civic education.</li>
</ul>
</div>
<div class="bg-gray-50 p-6 rounded-lg shadow-sm border border-gray-200">
<h3 class="text-xl font-semibold mb-3 text-green-800"> Research Questions</h3>
<ul class="space-y-2 text-gray-700 list-disc list-inside">
<li>How do students perceive the impact of AI on environmental issues?</li>
<li>What is the level of ecoliteracy and environmental civic competences among young people?</li>
<li>How do digital media influence ecological citizenship?</li>
</ul>
</div>
<div class="bg-gray-50 p-6 rounded-lg shadow-sm border border-gray-200">
<h3 class="text-xl font-semibold mb-3 text-green-800"> Theoretical Framework</h3>
<ul class="space-y-2 text-gray-700 list-disc list-inside">
<li><b>Eco-digital Posthumanism:</b> Theoretical elaboration of the eco-digital posthumanist theory.</li>
<li><b>Ecomedia Literacy:</b> Critical analysis of the ecological impact of media technologies.</li>
<li><b>Digital Civic Education and SDGs:</b> National and international regulatory context of reference.</li>
</ul>
</div>
</div>
</div>
</section>
<!-- ===== Section: Scientific Foundations (text + 2 buttons side by side) ===== -->
<section class="py-10 bg-green-50">
  <div class="mx-auto max-w-screen-2xl px-4 md:px-6">
    <!-- Introductory text -->
 <div class="bg-gray-50 p-6 rounded-lg shadow-sm border border-gray-200">
  <h3 class="text-2xl font-bold text-green-900 mb-2 text-center">Scientific Foundations of the Framework</h3>
  <p class="text-gray-700 leading-relaxed text-justify">
    Below are available <b>the theoretical foundation</b> of the EcoAI Framework defined as <i>Eco-digital Posthumanism</i> and 
    <b>the systematic and bibliometric review</b> on <i>Ecoliteracy and Social Media</i>. 
    The first elaborates the epistemological and pedagogical framework that integrates posthumanism, ecoliteracy, and AI literacy, outlining the four quadrants of the framework.
    It constitutes the conceptual reference underlying the domains and sub-domains, providing criteria of theoretical coherence and methodological rigor, and establishing the scientific and philosophical basis on which the entire EcoAI architecture is built.
    <br><br>
    The systematic and bibliometric review constitutes the theoretical-empirical basis of the EcoAI Framework.
    It analyzes the international literature on <i>ecoliteracy</i> and digital media, providing validated indicators and a mapping of research trends, ensuring <b>transparency</b>, <b>replicability</b>, and a direct connection with the scientific community.
    <br><br>
    In the EcoAI framework, it contributes to defining the referential context for the domain 
    <b>Identity Formation</b>, with particular attention to the sub-domains 
    <i>Ecodigital Positionality &amp; Imaginaries</i> and 
    <i>Algorithmic Bias, Fairness &amp; Representation</i>.
  </p>
</div>

    <!-- Buttons: Definition Note + Preprint SR -->
    <div class="flex flex-col sm:flex-row items-center justify-center gap-3">
      <!-- Existing button: Definition Note -->
      <a href="./documents/Eco_Digital_Posthumanism.pdf" target="_blank"
         class="inline-flex items-center justify-center px-5 py-3 rounded-lg font-semibold
                bg-green-700 text-white hover:bg-green-800 transition shadow">
        Definition Note ‚Äî Eco-digital Posthumanism
      </a>

      <!-- New button: Systematic Review (DOI/preprint) -->
      <a href="https://doi.org/INSERT_DOI_PREPRINT" target="_blank"
         class="inline-flex items-center justify-center px-5 py-3 rounded-lg font-semibold
                bg-white text-green-800 border border-green-300 hover:bg-green-100 transition shadow-sm">
        Ecoliteracy &amp; Social Media ‚Äî Systematic and Bibliometric Review
      </a>
    </div>
  </div>
</section>
<section class="py-8" id="framework">
<div class="mx-auto max-w-screen-2xl px-4 md:px-6">
<h2 class="text-3xl font-bold text-center mb-12 text-gray-800">The Four Quadrants of the EcoAI Framework</h2>
<img src="./images/ecodigital-posthumanism.png"
     alt="EcoAI Framework"
     class="mx-auto mb-8 rounded-lg shadow-lg max-w-4xl"/>
<p class="text-lg text-gray-600 max-w-5xl mx-auto mb-12 text-center">
  The framework is structured into four interconnected domains that guide the development of integrated eco-digital competences.  
  Click on each quadrant to explore the details.
</p>
<div class="grid md:grid-cols-2 gap-8" id="framework-grid">
</div>
</div>
</section>

<!-- CTA: link to Literacies page (EN) -->
<div class="py-6">
  <div class="mx-auto max-w-screen-2xl px-4 md:px-6 text-center">
    <a href="literacies.html"
       class="inline-flex items-center gap-2 px-6 md:px-8 py-4 md:py-5 text-lg md:text-xl font-semibold
              rounded-xl bg-green-700 text-white hover:bg-green-800 shadow-lg transition">
      Explore EcoAI Literacies
      <span aria-hidden="true">‚Üí</span>
    </a>
    <p class="mt-3 text-gray-600">Go to the dedicated page with complete descriptions and rubrics.</p>
  </div>
</div>

<section class="py-8 bg-white" id="competenze">
<div class="mx-auto max-w-screen-2xl px-4 md:px-6">
<h2 class="text-3xl font-bold text-center mb-12 text-gray-800">Competence Development</h2>
<p class="text-lg text-gray-600 max-w-5xl mx-auto mb-12 text-center">
  The framework aligns EcoAI competences with the European GreenComp model, defining four levels of mastery.  
  Select a competence to view the level descriptors.
</p>

<div class="bg-gray-50 p-6 rounded-lg shadow-sm border border-gray-200 mb-12">
<label class="block text-lg font-medium text-gray-700 mb-2" for="competence-selector">Select a Key Competence:</label>
<select class="w-full p-3 border border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500" id="competence-selector">
</select>
</div>

<div class="grid sm:grid-cols-2 lg:grid-cols-4 gap-6 text-sm" id="competence-details">
</div>

<h3 class="text-2xl font-bold text-center mt-20 mb-8 text-gray-800">Relationship between Quadrants and GreenComp Areas</h3>
<div class="chart-container">
<canvas id="competenceRadarChart"></canvas>
</div>
</div>

<div class="prose max-w-none px-8" style="text-align: justify;">
<h3 class="text-xl font-semibold mb-2">Foundational frameworks for the development and assessment of EcoAI competences</h3>
<p>
  The evaluative robustness of EcoAI is based on the deep integration with established standards of sustainability education
  and <i>AI literacy</i>. In particular, the framework takes <b>GreenComp</b> as its primary reference and integrates it with AI literacy models
  (Long &amp; Magerko; AICOS; Generative AI Literacy) to achieve a multilayered assessment strategy combining <b>qualitative depth</b>
  and <b>quantitative rigor</b>.
</p>

<h4 class="font-semibold mt-4">GreenComp: European framework of competences for sustainability</h4>
<p>
  GreenComp structures sustainability competence into <b>four areas</b> and <b>twelve sub-competences</b> (including: <i>Systems thinking</i> ‚Äì G1,
  <i>Critical thinking</i> ‚Äì G2, <i>Agency</i> ‚Äì G7, <i>Sustainability justice</i> ‚Äì G12). EcoAI <b>explicitly adapts</b> GreenComp,
  defining <b>four levels of mastery</b> ‚Äì Basic, Intermediate, Advanced, Critical ‚Äì and rubrics already contextualized to eco-digital scenarios.
  This correspondence provides a <b>common language</b>, recognized at European level, to describe competence progression,
  facilitating comparability and transferability of learning outcomes.
</p>

<h4 class="font-semibold mt-4">AI Literacy: Long &amp; Magerko, AICOS and Generative AI Literacy</h4>
<p>
  The framework integrates multiple models to fully cover the dimensions of AI literacy and Ministry guidelines for the introduction of Artificial Intelligence in schools.
  The model of <b>Long &amp; Magerko</b> (Understanding, Interacting, Critiquing, Designing, Evaluating) is mapped onto EcoAI quadrants
  (e.g., Understanding ‚Üí Systems Understanding; Interacting ‚Üí Tool-Based Learning; Critiquing ‚Üí Identity Formation; Designing ‚Üí Hybrid modules; Evaluating ‚Üí Digital ecosystems).
  <b>AICOS</b> provides a validated <i>quantitative scale</i> for measuring AI literacy (dimensions such as: understanding AI, working with AI,
  social impact, bias/fairness, decision and responsibility), useful as a <b>psychometric benchmark</b> to validate rubrics and questionnaires (Cronbach‚Äôs Œ± &gt; .8).
  <b>Generative AI Literacy</b> (Annapureddy et al.) specifically enriches the Tool-Based Learning domain with operational and reflective competences on generative systems.
</p>

<p>
  The result is a <b>multi-layer validation</b>: GreenComp structures the qualitative levels; the specific descriptors for AI build on Long &amp; Magerko
  and Generative AI Literacy; AICOS enables the <b>quantitative validation</b> of items and scales. Together, these elements ensure
  broad coverage, theoretical coherence, and <b>empirical solidity</b>.
</p>

<h4 class="font-semibold mt-4">Consolidated alignment table (Quadrants ‚Üî Competences ‚Üî AI Literacy ‚Üî SDG)</h4>
<div class="mt-2 bg-gray-50 p-4 rounded-lg border border-gray-200 overflow-x-auto">
<table class="w-full text-sm text-left border-collapse">
<thead class="bg-green-100">
<tr>
<th class="border px-2 py-1">EcoAI framework Quadrant</th>
<th class="border px-2 py-1">Key GreenComp competences</th>
<th class="border px-2 py-1">AI Literacy (Long &amp; Magerko)</th>
<th class="border px-2 py-1">Associated SDGs</th>
</tr>
</thead>
<tbody>
<tr>
<td class="border px-2 py-1">Systems Understanding</td>
<td class="border px-2 py-1">G1, G2, G3, G4, G9, G10, G11</td>
<td class="border px-2 py-1">Understanding / Evaluating</td>
<td class="border px-2 py-1">4, 13, 15, 17</td>
</tr>
<tr>
<td class="border px-2 py-1">Ecological Understanding of AI</td>
<td class="border px-2 py-1">G4, G12</td>
<td class="border px-2 py-1">Critiquing / Evaluating</td>
<td class="border px-2 py-1">4, 9, 12, 13, 16</td>
</tr>
<tr>
<td class="border px-2 py-1">Tool-Based Learning</td>
<td class="border px-2 py-1">G5, G6</td>
<td class="border px-2 py-1">Interacting / Designing</td>
<td class="border px-2 py-1">4, 9, 11, 12, 13</td>
</tr>
<tr>
<td class="border px-2 py-1">Identity Formation</td>
<td class="border px-2 py-1">G7, G8, G11</td>
<td class="border px-2 py-1">Interacting / Critiquing / Designing</td>
<td class="border px-2 py-1">4.7, 5, 10, 16</td>
</tr>
</tbody>
</table>
</div>

<h4 class="font-semibold mt-4">Integration of SDGs in the European and Italian context</h4>
<p>
  The EcoAI Framework aims to <b>deepen</b> the links already outlined in the SDGs by building targeted connections with the most relevant goals.  
  For example, for <i>AI energy consumption</i> (SDGs 10 and 13), it is relevant to develop modules that estimate the carbon and water footprint of AI systems while analyzing
  the unequal distribution of ecological costs. Similarly, through <i>Hybrid learning modules</i> (SDG 4.7), it is possible
  to activate global citizenship practices involving human-AI collaboration on transnational environmental issues.
  <br><br>
  The <b>EcoAI rubrics</b> already integrate these connections, explicitly incorporating SDG targets into the level descriptors.
  At the <i>Critical</i> level of the <b>Agency</b> competence, for example, the ability to propose AI-assisted interventions
  for climate justice in line with target 13, or to contribute to multi-stakeholder partnerships for sustainable innovation
  in line with target 17, is included. In this way, the framework does not consider the SDGs as external elements, but as constitutive references
  already woven into its pedagogical architecture.
</p>
</div>
</section>
<section class="pt-10 pb-12" id="impatto-globale">
  <div class="mx-auto max-w-screen-2xl px-4 md:px-6">
    <h2 class="text-3xl font-bold text-center mb-6 text-gray-800">
      Alignment with the Sustainable Development Goals (SDGs)
    </h2>
    <p class="text-lg text-gray-600 max-w-5xl mx-auto mb-12 text-center">
      The EcoAI framework directly contributes to numerous United Nations Sustainable Development Goals, promoting education for a fair and sustainable future.
    </p>
    <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-3 mt-6 mb-6" id="sdg-grid">
    </div>
  </div>
</section>

<section class="pt-8 pb-20 bg-white" id="metodologia">
  <div class="mx-auto max-w-screen-2xl px-4 md:px-6">
    <h2 class="text-3xl font-bold text-center mb-12 text-gray-800">Research Methodology: First Survey Administration</h2>

    <div class="mb-12 text-gray-700 leading-relaxed">
      <p>
        The first phase of research was conducted in <b>Ariano Irpino</b> between <b>May and June 2025</b>, at the end of the Civic Education lessons at the Istituto d'Istruzione Superiore
        "Giuseppe De Gruttola" ‚Äì Hospitality &amp; Culinary Arts and the Istituto d'Istruzione Secondaria Superiore "Ruggero II" ‚Äì Technical AFM ‚Äì SIA ‚Äì CAT.
        This section summarizes the preliminary results from administering the student questionnaire, which provided the empirical basis for the two papers
        connected to the <b>EcoAI Framework:</b> <i>Identity Formation</i> and <i>Ecological Understanding of AI</i>.
      </p>
    </div>

    <div class="grid md:grid-cols-2 gap-12 items-center">
      <!-- Left column -->
      <div>
        <div class="space-y-6">
          <div class="bg-gray-50 p-6 py-5 rounded-lg shadow-sm border border-gray-200">
            <h3 class="text-xl font-semibold mb-2 text-green-800">Population and Instrument</h3>
            <p class="text-gray-700">
              The sample consists of <b>404 upper-secondary school students</b> (ages 14‚Äì19),
              distributed from 1st to 5th year, with a <b>slight male prevalence (54% male, 46% female)</b>.
              The research was conducted through a <b>mixed questionnaire</b>, with Likert-scale items and open-ended questions,
              aimed at measuring <i>ecoliteracy</i>, perceptions of Artificial Intelligence, and practices of digital and ecological citizenship.
            </p>
          </div>

          <div class="bg-gray-50 p-6 rounded-lg shadow-sm border border-gray-200">
            <h3 class="text-xl font-semibold mb-2 text-green-800">Data Analysis</h3>
            <p class="text-gray-700">
              The analyses include:
            </p>
            <ul class="list-disc list-inside mt-2 space-y-1 text-gray-700">
              <li><b>Descriptive statistics</b>: distributions by gender, grade, use of digital devices, and AI knowledge.</li>
              <li><b>Reliability</b>: <i>Cronbach‚Äôs Œ±</i> for Likert batteries on AI perceptions and ecoliteracy.</li>
              <li><b>Inference</b>: correlations and regressions among ecoliteracy, digital media use, and attitudes toward AI.</li>
              <li><b>Qualitative</b>: categorization of open responses on expectations, concerns, and perceived uses of AI.</li>
            </ul>
          </div>
        </div>
      </div>

      <!-- Right column -->
      <div>
        <h3 class="text-2xl font-bold text-center mb-8 text-gray-800">Sample Distribution</h3>
        <div class="chart-container">
          <canvas id="populationPieChart"></canvas>
        </div>
        <p class="text-sm text-gray-600 mt-4 text-center">
          Percentage distribution by age range (14‚Äì15, 16‚Äì17, 18‚Äì19 years).
        </p>
      </div>
    </div>
  </div>
</section>



</main>
<footer class="bg-gray-800 text-white py-8">
  <div class="container mx-auto px-6 text-center">
    <p>¬© 2025 EcoAI Doctoral Project. All rights reserved.</p>
    <p class="text-sm text-gray-400 mt-2">This interactive dashboard is a visualization of the research framework.</p>
  </div>
</footer>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    // === DATA (from full page) ===
    const data = {
      frameworkQuadrants: [
        {
          id: 'systems-understanding',
          icon: 'üß†',
          title: 'Systems Understanding',
          // Embedded extended description
          description: `
            <div style="text-align:justify;">
              This domain constitutes the <i>epistemic and methodological foundation</i> of the EcoAI framework.
              It cultivates an ¬´eco-systemic view of intelligence¬ª that unites ecoliteracy with critical computational literacy,
              to read and compare natural systems and AI systems with a complex, interconnected perspective.
              The theoretical bases draw on the systemic view of life (Capra &amp; Luisi), complex thinking (Morin),
              and agential realism (Barad). The aim is to <b>ecologize</b> AI, embedding it within learning ecologies and the planet.
              Tools such as agent-based simulations (e.g., NetLogo) help visualize non-linear interactions, tipping points, and emergent phenomena.
            </div>`,
          subdomains: [
            {
              name: 'üåç Ecosystem Dynamics',
              text: `This sub-domain explores interdependencies between natural and artificial systems
              (dynamic patterns and feedback cycles), fostering a shift from static thinking to process-oriented thinking;
              AI acts as a cognitive amplifier for visualizations and simulations.`
            },
            {
              name: 'üîÅ Feedback Loops & Patterns',
              text: `Focus on feedback cycles, recurring structures, and pattern recognition across ecological and computational phenomena.`
            },
            {
              name: 'üìö Systems Literacy (Complexity Education)',
              text: `Literacy in complex systems: non-linearity, critical thresholds, emergence, and adaptability.`
            },
            {
              name: 'üß© Sympoietic Thinking Models',
              text: `Sympoietic thinking and co-production: intelligence as a distributed process in socio-techno-ecological networks.`
            }
          ]
        },
        {
          id: 'ecological-understanding',
          icon: 'üåø',
          title: 'Ecological Understanding of AI',
          description: `
            <div style="text-align:justify;">
              Sheds light on the material, infrastructural, and cultural entanglements between AI and ecologies.
              AI is part of complex ecological assemblages: attention is needed to energy and water footprint,
              infrastructure governance, environmental justice, and eco-political imaginaries.
              We adopt a double vision: ¬´Ecoliteracy <i>and</i> AI¬ª (AI as an ally of ecological education) and ¬´Ecoliteracy <i>of</i> AI¬ª
              (AI as an object of critical analysis across its entire life cycle).
            </div>`,
          subdomains: [
            {
              name: 'üó∫Ô∏è Digital Ecosystems & Infrastructures',
              text: `Digital infrastructures, data centers, model supply chains: environmental and territorial impacts.`
            },
            {
              name: '‚ö° AI Energy Consumption',
              text: `Energy use and carbon/water impacts of AI systems; metrics and accountability.`
            },
            {
              name: '‚öñÔ∏è Environmental and Climate Justice',
              text: `Environmental and climate justice: distribution of impacts, vulnerabilities, rights, and just transitions.`
            },
            {
              name: 'üèõÔ∏è Ecopolitical Tech Analysis',
              text: `Eco-political analysis of technology: bias, power, sociotechnical imaginaries, and policy.`
            }
          ]
        },
        {
          id: 'tool-based-learning',
          icon: 'üõ†Ô∏è',
          title: 'Tool-Based Learning',
          description: `
            <div style="text-align:justify;">
              Repositions digital and ecological tools as <b>co-constructors</b> of knowledge and responsibility.
              AI is part of students‚Äô <i>cognitive ecology</i> and acts as a co-educator shaping practices,
              interactions, and understanding of the world.
            </div>`,
          subdomains: [
            {
              name: 'üß™ AI-generated Content & Simulations',
              text: `Critical fluency on generative outputs and simulations; uses for ecological storytelling and scenarios.`
            },
            {
              name: 'üîó Hybrid Learning Modules',
              text: `Hybrid educational modules weaving ecological and digital literacies with sustainability-oriented practices.`
            },
            {
              name: 'üìç Situated Human‚ÄìAI Interaction',
              text: `Situated, contextual, multimodal (MLLM) human‚ÄìAI interactions for inquiry and creation.`
            },
            {
              name: 'üß™ Pedagogical Experimentation',
              text: `Pedagogical experimentation with sensors, platforms, and models to translate concepts into practice.`
            }
          ]
        },
        {
          id: 'identity-formation',
          icon: 'üë§',
          title: 'Identity Formation',
          description: `
            <div style="text-align:justify;">
              Explores the formation of the self and agency in eco-digital environments, fostering post-anthropocentric, relational subjectivities.
              Emphasizes positionalities, relational ethics, and ecological imaginaries in interaction with AI.
            </div>`,
          subdomains: [
            {
              name: 'ü§ñüåø Hybrid EcoDigital Agency',
              text: `Distributed, co-regulated agency across people, materials, ecosystems, and algorithmic systems.`
            },
            {
              name: 'üß≠ Ecodigital Positionality & Imaginaries',
              text: `Reflexivity on identities, places, and imaginaries; critique of colonialisms and algorithmic monocultures.`
            },
            {
              name: 'ü§ù Relational Ethics Education',
              text: `Relational ethics, care, and responsibility in eco-digital ecosystems.`
            },
            {
              name: 'üåê Posthuman Relational Ethics',
              text: `Posthuman and more-than-human visions for education and ecological justice.`
            }
          ]
        }
      ],
      competencies: {
        'G1: Systems Thinking': {
          base: 'Recognizes the difference between a natural and an artificial system.',
          intermedio: 'Describes feedback and cycles in both systems.',
          avanzato: 'Compares and maps complex interdependencies between AI and natural systems.',
          critico: 'Designs activities that demonstrate a deep interdependence between AI and the biosphere.'
        },
        'G2: Critical Thinking': {
          base: 'Expresses personal opinions about technologies.',
          intermedio: 'Recognizes the limits and biases of AI tools.',
          avanzato: 'Critically evaluates the social and environmental impact of AI.',
          critico: 'Argues for sustainable and responsible systemic alternatives.'
        },
        'G7: Agency': {
          base: 'Feels engaged with environmental problems.',
          intermedio: 'Uses AI to develop sustainable responses.',
          avanzato: 'Plans collective actions assisted by AI.',
          critico: 'Activates transformative processes and supports others (peer agency).'
        },
        'G12: Sustainability Justice': {
          base: 'Recognizes basic environmental injustices in the world.',
          intermedio: 'Connects environmental inequalities to technologies and data.',
          avanzato: 'Collects evidence and proposes changes to address injustices.',
          critico: 'Leads campaigns or projects of algorithmic environmental justice.'
        }
      },
      sdgs: [
        { id: 4,  title: 'Quality Education',                         connections: ['Systems Understanding', 'Tool-Based Learning', 'Identity Formation'] },
        { id: 9,  title: 'Industry, Innovation and Infrastructure',   connections: ['Ecological Understanding of AI', 'Tool-Based Learning'] },
        { id: 10, title: 'Reduced Inequalities',                      connections: ['Identity Formation', 'Environmental Justice'] },
        { id: 11, title: 'Sustainable Cities and Communities',        connections: ['Tool-Based Learning'] },
        { id: 12, title: 'Responsible Consumption and Production',    connections: ['Ecological Understanding of AI'] },
        { id: 13, title: 'Climate Action',                            connections: ['Systems Understanding', 'Ecological Understanding of AI'] },
        { id: 15, title: 'Life on Land',                              connections: ['Systems Understanding'] },
        { id: 16, title: 'Peace, Justice and Strong Institutions',    connections: ['Ecological Understanding of AI', 'Identity Formation'] },
        { id: 17, title: 'Partnerships for the Goals',                connections: ['Systems Understanding'] }
      ]
    };

    // === RENDER QUADRANTS with <details> (guaranteed opening) ===
    const grid = document.getElementById('framework-grid');
    data.frameworkQuadrants.forEach(q => {
      const card = document.createElement('div');
      card.className = 'bg-white px-6 py-5 rounded-lg shadow-lg transition-all duration-300 hover:shadow-xl';

      card.innerHTML = `
        <div class="mb-3">
          <h3 class="text-2xl font-bold text-gray-900">${q.title}</h3>
        </div>
        <div class="text-gray-700 mb-3">${q.description}</div>

        <details class="group border-t border-gray-200 pt-3">
          <summary class="cursor-pointer select-none flex items-center justify-between">
            <span class="text-sm font-semibold text-green-700">Sub-domains (click to expand)</span>
            <span class="text-gray-500 group-open:hidden">‚ñº</span>
            <span class="text-gray-500 hidden group-open:inline">‚ñ≤</span>
          </summary>
          <div class="details-content mt-3 space-y-3">
            ${q.subdomains.map(s => `
              <details class="bg-gray-50 rounded-lg border border-gray-200 p-3">
                <summary class="cursor-pointer font-medium">${s.name}</summary>
                <div class="mt-2 text-sm leading-relaxed">${s.text}</div>
              </details>
            `).join('')}
          </div>
        </details>
      `;

      grid.appendChild(card);
    });

    const competenceSelector = document.getElementById('competence-selector');
    const competenceDetails = document.getElementById('competence-details');
    Object.keys(data.competencies).forEach(key => {
      const option = document.createElement('option');
      option.value = key;
      option.textContent = key;
      competenceSelector.appendChild(option);
    });

    function updateCompetenceDetails(key) {
      const competence = data.competencies[key];
      competenceDetails.innerHTML = `
        <div class="bg-green-50 p-4 rounded-lg border border-green-200">
          <h4 class="font-bold text-green-800 mb-1">Basic</h4>
          <p class="text-gray-700">${competence.base}</p>
        </div>
        <div class="bg-yellow-50 p-4 rounded-lg border border-yellow-200">
          <h4 class="font-bold text-yellow-800 mb-1">Intermediate</h4>
          <p class="text-gray-700">${competence.intermedio}</p>
        </div>
        <div class="bg-blue-50 p-4 rounded-lg border border-blue-200">
          <h4 class="font-bold text-blue-800 mb-1">Advanced</h4>
          <p class="text-gray-700">${competence.avanzato}</p>
        </div>
        <div class="bg-purple-50 p-4 rounded-lg border border-purple-200">
          <h4 class="font-bold text-purple-800 mb-1">Critical</h4>
          <p class="text-gray-700">${competence.critico}</p>
        </div>
      `;
    }
    competenceSelector.addEventListener('change', (e) => updateCompetenceDetails(e.target.value));
    updateCompetenceDetails(Object.keys(data.competencies)[0]);

    new Chart(document.getElementById('competenceRadarChart'), {
      type: 'radar',
      data: {
        labels: ['Systems Thinking', 'Justice', 'Agency', 'Critical Thinking', 'Adaptability'],
        datasets: [{
          label: 'Systems Understanding',
          data: [5, 3, 3, 4, 3],
          backgroundColor: 'rgba(34, 139, 34, 0.2)',
          borderColor: 'rgba(34, 139, 34, 1)',
          borderWidth: 2
        }, {
          label: 'Identity Formation',
          data: [3, 5, 5, 4, 4],
          backgroundColor: 'rgba(75, 0, 130, 0.2)',
          borderColor: 'rgba(75, 0, 130, 1)',
          borderWidth: 2
        }]
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        scales: {
          r: {
            angleLines: { display: true },
            suggestedMin: 0,
            suggestedMax: 5,
            pointLabels: { font: { size: 12 } },
            ticks: { backdropColor: 'rgba(255, 255, 255, 0.75)' }
          }
        },
        plugins: {
          legend: { position: 'top' }
        }
      }
    });

    const sdgGrid = document.getElementById('sdg-grid');
    data.sdgs.forEach(sdg => {
      const card = document.createElement('div');
      card.className = 'relative group';
      card.innerHTML = `
        <img src="./images/SDG${sdg.id}.png"
             alt="SDG ${sdg.id}: ${sdg.title}"
             class="w-full h-auto rounded-lg shadow-md sdg-card">
        <div class="absolute inset-0 bg-black bg-opacity-70 flex items-center justify-center text-white text-center p-2 opacity-0 group-hover:opacity-100 transition-opacity duration-300 rounded-lg">
          <div>
            <p class="font-bold">SDG ${sdg.id}: ${sdg.title}</p>
            <p class="text-xs mt-1">Connected to: ${sdg.connections.join(', ')}</p>
          </div>
        </div>
      `;
      sdgGrid.appendChild(card);
    });

    const sdgCounts = data.sdgs.reduce((acc, sdg) => {
      acc[sdg.id] = sdg.connections.length;
      return acc;
    }, {});
    new Chart(document.getElementById('sdgDoughnutChart'), {
      type: 'doughnut',
      data: {
        labels: data.sdgs.map(s => `SDG ${s.id}: ${s.title}`),
        datasets: [{
          label: 'Number of EcoAI Connections',
          data: Object.values(sdgCounts),
          backgroundColor: [
            '#E5243B', '#DDA63A', '#4C9F38', '#C5192D', '#FF3A21',
            '#26BDE2', '#FCC30B', '#A21942', '#FD6925'
          ],
          hoverOffset: 4
        }]
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        plugins: {
          legend: { display: false }
        }
      }
    });

    new Chart(document.getElementById('populationPieChart'), {
      type: 'pie',
      data: {
        labels: ['14‚Äì15 years', '16‚Äì17 years', '18‚Äì19 years'],
        datasets: [{
          label: '',
          data: [35, 45, 20],
          backgroundColor: ['#6B8E23', '#8FBC8F', '#9ACD32'],
          hoverOffset: 4
        }]
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        plugins: {
          legend: { position: 'bottom' },
          tooltip: {
            displayColors: false,
            callbacks: {
              title: () => '',
              label: function(context) {
                const dataset = context.dataset;
                const total = dataset.data.reduce((a, b) => a + b, 0);
                const value = dataset.data[context.dataIndex];
                const pct = total > 0 ? ((value / total) * 100).toFixed(1) : 0;
                return `${pct}%`;
              }
            }
          }
        }
      }
    });

    const mobileMenuButton = document.getElementById('mobile-menu-button');
    const mobileMenu = document.getElementById('mobile-menu');

    // === INJECTION FOR DETAILED SUB-DOMAINS OF "Systems Understanding" ===
    try {
      const systemsCard = Array.from(document.querySelectorAll('#framework-grid .bg-white')).find(c =>
        c.querySelector('h3') && c.querySelector('h3').textContent.trim() === 'Systems Understanding'
      );
      if (systemsCard) {
        const details = systemsCard.querySelector('.details');
        if (details) {
          details.innerHTML = `<h4 class="font-semibold text-gray-700 mb-2">Key sub-domains (click to expand):</h4>` + `<div class="space-y-3"><ul class="list-disc list-inside space-y-2 text-gray-700">
    <li>
      <a href="#" class="text-green-700 font-semibold toggle-subdomain">üåç Ecosystem Dynamics</a>
      <div class="subdomain-text hidden mt-2 text-gray-700"><div style="text-align: justify;">This sub-domain focuses on students‚Äô ability to perceive, interpret, and navigate the complex interdependencies between natural and artificial systems, including dynamic patterns and feedback cycles. The goal is to move from static thinking to process-based thinking, integrating local knowledge and using AI for visualization and simulation. Research shows that students often confuse ecological cycles with systems and maintain a static understanding. The proposed solution ‚Äî integrating AI models such as agent-based simulations and dynamic feedback visualizations ‚Äî offers cognitive scaffolding that makes abstract, dynamic concepts tangible and observable, thereby improving systems thinking. In this context AI is not merely a tool for efficiency, but a cognitive amplifier in ecological education, capable of transforming abstract knowledge into experiential learning.</div>
        <a href="#" class="text-sm text-blue-700 mt-3 block toggle-rubric">‚û§ Show Rubric Table</a>
        <div class="rubric-table hidden mt-2 bg-gray-50 p-4 rounded-lg border border-gray-200 overflow-x-auto"></div>
      </div>
    </li>

    <li>
      <a href="#" class="text-green-700 font-semibold toggle-subdomain">üîÑ Feedback Loops & Patterns</a>
      <div class="subdomain-text hidden mt-2 text-gray-700"><div style="text-align: justify;">This sub-domain cultivates recognition of how reinforcing (positive) and balancing (negative) feedback cycles shape the resilience of ecosystems and socio-economic-environmental systems. AI tools are essential for dynamic visualization and simulation of these cycles. In particular, generative AIs can support reflection by providing explanations of loop structures, tracing causal links, and offering sufficient narration to foster metacognitive understanding. Thus, AI is not only a simulation tool but also a metacognitive tool that helps students reflect on their understanding of complex systemic processes, moving beyond memorization of components to reach deep conceptual understanding and critique of systemic behavior.</div>
        <a href="#" class="text-sm text-blue-700 mt-3 block toggle-rubric">‚û§ Show Rubric Table</a>
        <div class="rubric-table hidden mt-2 bg-gray-50 p-4 rounded-lg border border-gray-200 overflow-x-auto"></div>
      </div>
    </li>

    <li>
      <a href="#" class="text-green-700 font-semibold toggle-subdomain">üìö Systems Literacy (Complexity Education)</a>
      <div class="subdomain-text hidden mt-2 text-gray-700"><div style="text-align: justify;">It focuses on the ability to understand and interact with complex socio-ecological systems, promoting a mindset of interconnection. This implies moving from modular thinking to networked and recursive understanding, making use of transdisciplinary projects and network modeling. By promoting the shift from ‚Äúisolated facts‚Äù to dynamic, relational understanding, and enabling students to detect systemic tensions, participate in co-design (e.g., in civic planning or AI regulation), and adopt resilient solution pathways, systems literacy becomes a prerequisite for informed, active citizenship in an increasingly complex, technologically mediated world. In an era where AI and complex environmental issues shape society, systems literacy is not only an academic skill but a civic competence essential to the resilience and evolution of democratic processes in the face of techno-ecological challenges.</div>
        <a href="#" class="text-sm text-blue-700 mt-3 block toggle-rubric">‚û§ Show Rubric Table</a>
        <div class="rubric-table hidden mt-2 bg-gray-50 p-4 rounded-lg border border-gray-200 overflow-x-auto"></div>
      </div>
    </li>

    <li>
      <a href="#" class="text-green-700 font-semibold toggle-subdomain">ü§ù Sympoietic Thinking Models</a>
      <div class="subdomain-text hidden mt-2 text-gray-700"><div style="text-align: justify;">Proposes a shift from autonomous frames to co-creative frames of ‚Äúmaking-with,‚Äù emphasizing relationality and collective becoming among humans, AI, and environment. The central idea is that ‚Äúno system makes itself ‚Äî all are situated within broader relational complexes.‚Äù This directly challenges the anthropocentric notion of human exceptionalism and control over nature and technology. If systems (including the human‚ÄìAI‚Äìnature assemblage) are co-created, then ethical responsibility is co-distributed: not merely a human ethics toward nature or AI, but an ethics emerging from the intra-actions that weave these entangled systems. This stance provides a robust philosophical foundation for EcoAI as a whole, shifting from an instrumental view of AI to an ethical position of shared becoming and mutual responsibility, crucial for addressing complex environmental and social challenges.</div>
        <a href="#" class="text-sm text-blue-700 mt-3 block toggle-rubric">‚û§ Show Rubric Table</a>
        <div class="rubric-table hidden mt-2 bg-gray-50 p-4 rounded-lg border border-gray-200 overflow-x-auto"></div>
      </div>
    </li>
    </ul></div>`;
          // Toggle handling
          details.querySelectorAll('.toggle-subdomain').forEach(link => {
            link.addEventListener('click', (e) => {
              e.preventDefault();
              const box = link.parentElement.querySelector('.subdomain-text');
              if (box) box.classList.toggle('hidden');
            });
          });
          details.querySelectorAll('.toggle-rubric').forEach(link => {
            link.addEventListener('click', (e) => {
              e.preventDefault();
              const box = link.parentElement.querySelector('.rubric-table');
              if (box) box.classList.toggle('hidden');
            });
          });
        }
      }
    } catch (e) { console.error('Inject Systems Understanding subdomains failed:', e); }


    // === INJECTION FOR DETAILED SUB-DOMAINS OF "Ecological Understanding of AI" ===
    try {
      const card = Array.from(document.querySelectorAll('#framework-grid .bg-white')).find(c =>
        c.querySelector('h3') && c.querySelector('h3').textContent.trim() === 'Ecological Understanding of AI'
      );
      if (card) {
        const details = card.querySelector('.details');
        if (details) {
          details.innerHTML = `<h4 class="font-semibold text-gray-700 mb-2">Key sub-domains (click to expand):</h4>` + `<div class="space-y-3"><ul class="list-disc list-inside space-y-2 text-gray-700">
    <li>
      <a href="#" class="text-green-700 font-semibold toggle-subdomain">üèóÔ∏è Digital Ecosystems & Infrastructures</a>
      <div class="subdomain-text hidden mt-2 text-gray-700"><div style="text-align: justify;">This sub-domain explores the interplay between socio-technical systems, data governance, platform economies, and educational transformations, emphasizing that digital infrastructures are not neutral but embed values and power relations. The framework urges us to grasp the materiality of the seemingly ‚Äúimmaterial‚Äù digital world, making visible hidden environmental costs (energy, mining, e-waste) and power dynamics in data centers and supply chains. Understanding such infrastructures enables a new form of ‚Äúinfrastructural agency‚Äù to promote more sustainable and equitable digital governance, going beyond superficial app interaction and developing a critical infrastructural literacy for responsible digital citizenship.</div>
        <a href="#" class="text-sm text-blue-700 mt-3 block toggle-rubric">‚û§ Show Rubric Table</a>
        <div class="rubric-table hidden mt-2 bg-gray-50 p-4 rounded-lg border border-gray-200 overflow-x-auto"></div>
      </div>
    </li>

    <li>
      <a href="#" class="text-green-700 font-semibold toggle-subdomain">‚ö° AI Energy Consumption</a>
      <div class="subdomain-text hidden mt-2 text-gray-700"><div style="text-align: justify;">Investigates AI‚Äôs dual role: on the one hand it consumes large amounts of energy and resources (including water and carbon impacts); on the other it offers tools for sustainability. Concrete data are considered on model and data-center footprints and on the rebound effect, whereby efficiency gains can paradoxically increase total energy demand. These findings highlight the paradox of ‚Äúgreen AI‚Äù and the need for systemic solutions: AI can be a tool for sustainability, but its existence and growth can prove unsustainable. This implies that students and policy-makers should critically evaluate AI‚Äôs entire life cycle, promoting ethical design, responsible consumption, and regulatory frameworks that account for overall ecological footprint.</div>
        <a href="#" class="text-sm text-blue-700 mt-3 block toggle-rubric">‚û§ Show Rubric Table</a>
        <div class="rubric-table hidden mt-2 bg-gray-50 p-4 rounded-lg border border-gray-200 overflow-x-auto"></div>
      </div>
    </li>

    <li>
      <a href="#" class="text-green-700 font-semibold toggle-subdomain">‚öñÔ∏è Environmental & Climate Justice</a>
      <div class="subdomain-text hidden mt-2 text-gray-700"><div style="text-align: justify;">Highlights how ecological crises are intertwined with social inequalities. It shows that algorithms, though seemingly neutral, can reproduce or amplify existing inequalities, creating ‚Äúsacrifice zones‚Äù or overlooking vulnerable communities. It goes beyond mere ‚Äúbias detection‚Äù toward a deeper critique of ‚ÄúAI colonialism‚Äù and the ‚Äúcultural imperialism‚Äù of generative systems. The framework insists on decolonial epistemologies and situated audits co-designed with communities, placing education in a proactive, transformative role in reimagining AI systems oriented toward genuine justice.</div>
        <a href="#" class="text-sm text-blue-700 mt-3 block toggle-rubric">‚û§ Show Rubric Table</a>
        <div class="rubric-table hidden mt-2 bg-gray-50 p-4 rounded-lg border border-gray-200 overflow-x-auto"></div>
      </div>
    </li>

    <li>
      <a href="#" class="text-green-700 font-semibold toggle-subdomain">üèõÔ∏è Ecopolitical Tech Analysis</a>
      <div class="subdomain-text hidden mt-2 text-gray-700"><div style="text-align: justify;">Examines the political, economic, and ecological entanglements of technology, recognizing that it grows within power-laden systems and requires rigorous socio-technical literacy. It moves from seeing technology as a neutral tool to understanding it as a political-ecological actor with intrinsic biases and power structures. The notion of sociotechnical imaginaries shows that collective visions of technology‚Äôs role guide its development and impact, making it a terrain of political contestation. Building this literacy enables eco-political interventions to ensure that technology serves just and sustainable ends rather than perpetuating existing power dynamics.</div>
        <a href="#" class="text-sm text-blue-700 mt-3 block toggle-rubric">‚û§ Show Rubric Table</a>
        <div class="rubric-table hidden mt-2 bg-gray-50 p-4 rounded-lg border border-gray-200 overflow-x-auto"></div>
      </div>
    </li>
    </ul></div>`;
          details.querySelectorAll('.toggle-subdomain').forEach(link => {
            link.addEventListener('click', (e) => {
              e.preventDefault();
              const box = link.parentElement.querySelector('.subdomain-text');
              if (box) box.classList.toggle('hidden');
            });
          });
          details.querySelectorAll('.toggle-rubric').forEach(link => {
            link.addEventListener('click', (e) => {
              e.preventDefault();
              const box = link.parentElement.querySelector('.rubric-table');
              if (box) box.classList.toggle('hidden');
            });
          });
        }
      }
    } catch (e) { console.error('Inject subdomains failed for Ecological Understanding of AI:', e); }


    // === INJECTION FOR DETAILED SUB-DOMAINS OF "Tool-Based Learning" ===
    try {
      const card = Array.from(document.querySelectorAll('#framework-grid .bg-white')).find(c =>
        c.querySelector('h3') && c.querySelector('h3').textContent.trim() === 'Tool-Based Learning'
      );
      if (card) {
        const details = card.querySelector('.details');
        if (details) {
          details.innerHTML = `<h4 class="font-semibold text-gray-700 mb-2">Key sub-domains (click to expand):</h4>` + `<div class="space-y-3"><ul class="list-disc list-inside space-y-2 text-gray-700">
    <li>
      <a href="#" class="text-green-700 font-semibold toggle-subdomain">üß™ AI-Generated Content & Simulations</a>
      <div class="subdomain-text hidden mt-2 text-gray-700"><div style="text-align: justify;">Examines the cognitive, ecological, and ethical implications of AI-generated outputs and simulations, treating synthetic products not only as results but as sociotechnical events with effects on cognition, ecology, and ethics. The pervasiveness of AI content requires critical fluency. Simulations enable speculative pedagogies and scenario-based learning (climate, resource management), but they are not neutral: it is necessary to analyze material impacts (carbon, water) and how models shape imaginaries. The goal is not only to critique AI-produced media, but to creatively reappropriate them for ecological storytelling.</div>
        <a href="#" class="text-sm text-blue-700 mt-3 block toggle-rubric">‚û§ Show Rubric Table</a>
        <div class="rubric-table hidden mt-2 bg-gray-50 p-4 rounded-lg border border-gray-200 overflow-x-auto"></div>
      </div>
    </li>

    <li>
      <a href="#" class="text-green-700 font-semibold toggle-subdomain">üîó Hybrid Learning Modules</a>
      <div class="subdomain-text hidden mt-2 text-gray-700"><div style="text-align: justify;">Represent an educational frontier where digital and ecological literacies intertwine in AI-enhanced, sustainability-oriented experiences. They go beyond the simple online-in-person blend, intentionally weaving ecological thinking, mastery of AI tools, and civic engagement. The hybrid nature enables working across contexts, media, and temporalities, embodying distributed cognition and adaptability. Examples such as AI-supported water-quality simulations reinforce concepts from other sub-domains and connect ecosystem dynamics and feedback.</div>
        <a href="#" class="text-sm text-blue-700 mt-3 block toggle-rubric">‚û§ Show Rubric Table</a>
        <div class="rubric-table hidden mt-2 bg-gray-50 p-4 rounded-lg border border-gray-200 overflow-x-auto"></div>
      </div>
    </li>

    <li>
      <a href="#" class="text-green-700 font-semibold toggle-subdomain">üìç Situated Human‚ÄìAI Interaction</a>
      <div class="subdomain-text hidden mt-2 text-gray-700"><div style="text-align: justify;">Investigates how students and AI systems co-create meanings and ecological understandings in situated, embodied environments. Intelligence is not confined to minds or algorithms, but emerges from intra-actions among humans, machines, and environments. Situated interaction becomes participation in learning: students negotiate ecological problems with AI, sensors, and peers in real contexts. Example: working with AI sensor kits to learn both data literacy and the complex relationships among water systems, sensor accuracy, algorithmic calibration, and local conditions.</div>
        <a href="#" class="text-sm text-blue-700 mt-3 block toggle-rubric">‚û§ Show Rubric Table</a>
        <div class="rubric-table hidden mt-2 bg-gray-50 p-4 rounded-lg border border-gray-200 overflow-x-auto"></div>
      </div>
    </li>

    <li>
      <a href="#" class="text-green-700 font-semibold toggle-subdomain">üß∞ Pedagogical Experimentation with Digital Tools</a>
      <div class="subdomain-text hidden mt-2 text-gray-700"><div style="text-align: justify;">Investigates the transformative potential and pedagogical nuances of employing AI-enabled technologies in sustainability education. Rather than treating tools as simple implementations, it positions them as active mediators of ecological meaning, social interaction, and identity formation. The classroom becomes a site of reflective praxis, where students and teachers explore how AI reshapes both ecological understanding and pedagogical relationships (e.g., AI biodiversity apps in the field: ecological observation + reflection on algorithmic classifications, bias, and knowledge-generation policies).</div>
        <a href="#" class="text-sm text-blue-700 mt-3 block toggle-rubric">‚û§ Show Rubric Table</a>
        <div class="rubric-table hidden mt-2 bg-gray-50 p-4 rounded-lg border border-gray-200 overflow-x-auto"></div>
      </div>
    </li>

    <li>
      <a href="#" class="text-green-700 font-semibold toggle-subdomain">üé® Multimodal Approaches & Creativity</a>
      <div class="subdomain-text hidden mt-2 text-gray-700"><div style="text-align: justify;">Highlights the role of sensory, semiotic, and creative practices in fostering ecoliteracy and deep ecological imagination. The integration of multimodal AI (MLLM) enables real-time synthesis of text, images, and sounds, opening new interfaces for exploration and inquiry. These tools support ecological storytelling, community mapping, and collaborative network design, offering multimodal avenues to express relationships, processes, and possible futures. Creativity becomes a pedagogical necessity for encoding diverse perspectives, future imaginaries, and systemic interrelations.</div>
        <a href="#" class="text-sm text-blue-700 mt-3 block toggle-rubric">‚û§ Show Rubric Table</a>
        <div class="rubric-table hidden mt-2 bg-gray-50 p-4 rounded-lg border border-gray-200 overflow-x-auto"></div>
      </div>
    </li>
    </ul></div>`;
          details.querySelectorAll('.toggle-subdomain').forEach(link => {
            link.addEventListener('click', (e) => {
              e.preventDefault();
              const box = link.parentElement.querySelector('.subdomain-text');
              if (box) box.classList.toggle('hidden');
            });
          });
          details.querySelectorAll('.toggle-rubric').forEach(link => {
            link.addEventListener('click', (e) => {
              e.preventDefault();
              const box = link.parentElement.querySelector('.rubric-table');
              if (box) box.classList.toggle('hidden');
            });
          });
        }
      }
    } catch (e) { console.error('Inject subdomains failed for Tool-Based Learning:', e); }


    // === INJECTION FOR DETAILED SUB-DOMAINS OF "Identity Formation" ===
    try {
      const card = Array.from(document.querySelectorAll('#framework-grid .bg-white')).find(c =>
        c.querySelector('h3') && c.querySelector('h3').textContent.trim() === 'Identity Formation'
      );
      if (card) {
        const details = card.querySelector('.details');
        if (details) {
          details.innerHTML = `<h4 class="font-semibold text-gray-700 mb-2">Key sub-domains (click to expand):</h4>` + `<div class="space-y-3"><ul class="list-disc list-inside space-y-2 text-gray-700">
    <li>
      <a href="#" class="text-green-700 font-semibold toggle-subdomain">ü§ñüåø Hybrid EcoDigital Agency</a>
      <div class="subdomain-text hidden mt-2 text-gray-700"><div style="text-align: justify;">Captures students‚Äô emerging capacities to act collaboratively within intertwined ecological and technological systems, recognizing that agency today is neither solely human nor purely ecological, but techno-natural. Agency is not an individual attribute but is co-regulated in interactions among peers, educators, and algorithmic systems, shifting the focus from autonomous individualism to collective, systemic action. This framework is reinforced by participatory design approaches and emerging perspectives on hybrid intelligence in AI education.</div>
        <a href="#" class="text-sm text-blue-700 mt-3 block toggle-rubric">‚û§ Show Rubric Table</a>
        <div class="rubric-table hidden mt-2 bg-gray-50 p-4 rounded-lg border border-gray-200 overflow-x-auto"></div>
      </div>
    </li>

    <li>
      <a href="#" class="text-green-700 font-semibold toggle-subdomain">üß≠ Ecodigital Positionality & Imaginaries</a>
      <div class="subdomain-text hidden mt-2 text-gray-700"><div style="text-align: justify;">Invites students to critically reflect on their social, cultural, and ecological positionalities at the intersection with AI systems. Identities, place-based perspectives, and collective visions shape ‚Äî and are shaped by ‚Äî the deployment of AI in ecological contexts. AI imaginaries are never neutral and reflect power dynamics: the critique of ‚ÄúAI colonialism‚Äù and the ‚Äúcultural imperialism‚Äù of generative systems makes it necessary to foster an education that resists neocolonial content and cultivates a plurality of ecological imaginaries. A pedagogy centered on eco-digital positionality promotes empathy, epistemic justice, and participatory imagination.</div>
        <a href="#" class="text-sm text-blue-700 mt-3 block toggle-rubric">‚û§ Show Rubric Table</a>
        <div class="rubric-table hidden mt-2 bg-gray-50 p-4 rounded-lg border border-gray-200 overflow-x-auto"></div>
      </div>
    </li>

    <li>
      <a href="#" class="text-green-700 font-semibold toggle-subdomain">ü§ù Relational Ethics Education</a>
      <div class="subdomain-text hidden mt-2 text-gray-700"><div style="text-align: justify;">Emphasizes cultivating ethical awareness through relations of care that include human, non-human, and technological worlds. It is grounded in ethics of care and posthuman relationality to challenge disembodied approaches to AI ethics, positioning care as a primary relational value and practice. In an ecoliteracy context, this responsiveness embraces ecosystems, AI agents, and communities, orienting toward a relational ontological stance of interdependence and shared vulnerability.</div>
        <a href="#" class="text-sm text-blue-700 mt-3 block toggle-rubric">‚û§ Show Rubric Table</a>
        <div class="rubric-table hidden mt-2 bg-gray-50 p-4 rounded-lg border border-gray-200 overflow-x-auto"></div>
      </div>
    </li>

    <li>
      <a href="#" class="text-green-700 font-semibold toggle-subdomain">üß™ Algorithmic Bias, Fairness & Representation</a>
      <div class="subdomain-text hidden mt-2 text-gray-700"><div style="text-align: justify;">Interrogates the sociotechnical and ethical dimensions of AI systems, treating algorithms not as mere computational artifacts but as political agents that can reproduce or exacerbate systemic inequalities. With the growing reliance on AI for sustainability indicators, environmental modeling, and educational tools, EcoAI foregrounds how biases in data, design, and implementation can reinforce injustices. This focus aligns with GreenComp goals (responsibility, fairness) and SDGs 10 and 16, promoting critical capacities to ask ‚Äúwho benefits and who pays the price‚Äù of systemic interventions.</div>
        <a href="#" class="text-sm text-blue-700 mt-3 block toggle-rubric">‚û§ Show Rubric Table</a>
        <div class="rubric-table hidden mt-2 bg-gray-50 p-4 rounded-lg border border-gray-200 overflow-x-auto"></div>
      </div>
    </li>

    <li>
      <a href="#" class="text-green-700 font-semibold toggle-subdomain">üåç Post-Anthropocentric Identity</a>
      <div class="subdomain-text hidden mt-2 text-gray-700"><div style="text-align: justify;">Invites the deconstruction of the anthropocentric self to promote new eco-centric identity forms through interactions with AI and ecological systems. It questions entrenched dualisms (human/non-human, culture/nature, technology/ecology) and redefines identity as emergent, situated, and relational. This ontological shift, informed by posthuman and environmental perspectives, promotes ecological humility, inter-species co-agency, and distributed responsibilities, in line with GreenComp competences.</div>
        <a href="#" class="text-sm text-blue-700 mt-3 block toggle-rubric">‚û§ Show Rubric Table</a>
        <div class="rubric-table hidden mt-2 bg-gray-50 p-4 rounded-lg border border-gray-200 overflow-x-auto"></div>
      </div>
    </li>

    <li>
      <a href="#" class="text-green-700 font-semibold toggle-subdomain">Posthuman Relational Ethics</a>
      <div class="subdomain-text hidden mt-2 text-gray-700"><div style="text-align: justify;">Reworks traditional ethics by emphasizing the entanglement among humans, technologies, and other ecological entities, offering a robust foundation for EcoAI. Drawing on Donna Haraway (sympoiesis, ‚Äúmaking-with‚Äù) and Karen Barad (agential realism), it shifts attention from individual moral actors to intra-active, distributed relations. In the EcoAI framework, AI is not a neutral actor but a participant within ecological assemblages, requiring ethical responsibility in design, implementation, and pedagogical interaction.</div>
        <a href="#" class="text-sm text-blue-700 mt-3 block toggle-rubric">‚û§ Show Rubric Table</a>
        <div class="rubric-table hidden mt-2 bg-gray-50 p-4 rounded-lg border border-gray-200 overflow-x-auto"></div>
      </div>
    </li>
    </ul></div>`;
          details.querySelectorAll('.toggle-subdomain').forEach(link => {
            link.addEventListener('click', (e) => {
              e.preventDefault();
              const box = link.parentElement.querySelector('.subdomain-text');
              if (box) box.classList.toggle('hidden');
            });
          });
          details.querySelectorAll('.toggle-rubric').forEach(link => {
            link.addEventListener('click', (e) => {
              e.preventDefault();
              const box = link.parentElement.querySelector('.rubric-table');
              if (box) box.classList.toggle('hidden');
            });
          });
        }
      }
    } catch (e) { console.error('Inject subdomains failed for Identity Formation:', e); }
  });
</script>
    </script>

<!-- ==== DOMAIN-LEVEL RUBRICS (from SOLO RUBRIC.docx) ==== -->
<script>
(function(){
  const tbl = (rows) => `
    <div class="overflow-x-auto">
      <table class="w-full text-left border-collapse">
        <thead>
          <tr class="bg-green-100 text-xs uppercase tracking-wide">
            <th class="border px-3 py-2">Competence (GreenComp / AI Literacy ‚Üí EcoAI)</th>
            <th class="border px-3 py-2">Basic</th>
            <th class="border px-3 py-2">Intermediate</th>
            <th class="border px-3 py-2">Advanced</th>
            <th class="border px-3 py-2">Critical</th>
          </tr>
        </thead>
        <tbody>
          ${rows.map(r => `
            <tr>
              <td class="border align-top px-3 py-2 font-medium">${r.title}</td>
              <td class="border align-top px-3 py-2">${r.basic}</td>
              <td class="border align-top px-3 py-2">${r.intermediate}</td>
              <td class="border align-top px-3 py-2">${r.advanced}</td>
              <td class="border align-top px-3 py-2">${r.critical}</td>
            </tr>
          `).join('')}
        </tbody>
      </table>
    </div>
  `;

  const RUBRIC_SYSTEMS = tbl([
    { title:"Systems Thinking (G1) & Understanding AI",
      basic:"Recognizes basic differences between a natural and an artificial system; identifies simple patterns. Expresses personal opinions on technologies.",
      intermediate:"Describes feedback loops and cycles in both natural and AI systems; recognizes basic limits and biases of AI tools.",
      advanced:"Compares and maps complex interdependencies between AI and natural systems; critically evaluates socio-environmental impacts of AI.",
      critical:"Designs activities demonstrating deep interdependence between AI and the biosphere; argues for sustainable and responsible systemic alternatives." },
    { title:"Problem Framing (G3) & Designing AI",
      basic:"Describes a local environmental problem.",
      intermediate:"Collaborates with AI to collect information for problem description.",
      advanced:"Uses AI to simulate causes and effects in complex problems.",
      critical:"Redefines problems by including ecological, ethical, and algorithmic perspectives." },
    { title:"Systems Mapping (G4) & Evaluating AI",
      basic:"Traces a simple map of cause-effects.",
      intermediate:"Identifies nodes and flows in systems (e.g., resources‚Äìenergy‚ÄìAI).",
      advanced:"Integrates technologies to create dynamic maps. Simulates systemic behaviors with AI.",
      critical:"Analyzes breaking points and simulates systemic interventions. Proposes interventions based on sympoietic principles, demonstrating a holistic, co-creative understanding of systems." },
    { title:"Non-Linear Cause‚ÄìEffect Relations (EcoAI Specific)",
      basic:"Identifies simple, direct cause‚Äìeffect relationships.",
      intermediate:"Recognizes that some changes can have unexpected or delayed effects.",
      advanced:"Explains the concept of tipping points and feedback loops in environmental/AI systems.",
      critical:"Designs scenarios or interventions that account for non-linear dynamics and potential unintended consequences in eco-digital systems." },
    { title:"Sympoietic Thinking (EcoAI Specific)",
      basic:"Recognizes that humans interact with nature and technology.",
      intermediate:"Describes simple collaborations between humans and AI for a task.",
      advanced:"Explains how humans, AI, and natural elements can mutually shape outcomes in a project.",
      critical:"Designs and leads projects that demonstrate co-creation and shared agency among human, non-human, and algorithmic entities for systemic flourishing." }
  ]);

  const RUBRIC_ECOLOGICAL = tbl([
    { title:"Sustainability Justice (G12) & Critiquing AI",
      basic:"Recognizes basic environmental injustices in the world and that digital devices have an environmental impact. Expresses personal opinions on AI‚Äôs societal impact.",
      intermediate:"Connects environmental inequalities to technologies and data (e.g., e-waste, data centers). Recognizes the limits and biases of AI tools regarding environmental data.",
      advanced:"Collects evidence and proposes changes to address environmental injustices linked to AI. Critically evaluates the social and environmental impact of AI infrastructure and energy consumption.",
      critical:"Guides campaigns or projects of algorithmic environmental justice, advocating for equitable distribution of environmental harms and benefits. Argues for sustainable and responsible alternatives to current AI development and deployment practices." },
    { title:"Digital Ecosystems & Infrastructures (EcoAI Specific)",
      basic:"Identifies basic components of digital devices (e.g., screen, battery) and knows they consume energy.",
      intermediate:"Describes the basic concept of a data center or cloud and its function.",
      advanced:"Traces the lifecycle of a digital device or the energy source of a data center, identifying key environmental impacts.",
      critical:"Analyzes the political economy of digital infrastructures, including supply chains, corporate control, and their global ecological and social consequences." },
    { title:"AI Energy Consumption (EcoAI Specific)",
      basic:"Knows that AI uses energy.",
      intermediate:"Can state examples of AI‚Äôs energy consumption (e.g., ChatGPT queries, training models).",
      advanced:"Estimates the carbon or water footprint of specific AI tools or activities. Explains the concept of a ‚Äúrebound effect‚Äù in AI energy use.",
      critical:"Proposes and evaluates strategies for reducing AI‚Äôs environmental footprint at a systemic level, considering policy, design, and user behavior." },
    { title:"Ecopolitical Tech Analysis (EcoAI Specific)",
      basic:"Expresses general concerns about technology‚Äôs impact on society or environment.",
      intermediate:"Identifies basic regulations or policies related to technology or environment.",
      advanced:"Analyzes how economic incentives or policy decisions influence the environmental impact of AI (e.g., e-waste regulation, data center location).",
      critical:"Proposes and advocates for specific ecopolitical interventions (e.g., supply chain transparency, mandatory carbon reporting for AI models) to shape more just and sustainable technological futures." }
  ]);

  const RUBRIC_TOOL = tbl([
    { title:"Interacting with AI & Adaptability (G5)",
      basic:"Uses AI tools guided by the teacher for basic environmental information. Utilizes digital tools for simple tasks.",
      intermediate:"Experiments with new solutions using digital tools for sustainable purposes. Poses environmental questions to AI and seeks answers.",
      advanced:"Modifies strategies and tools based on context and feedback to achieve ecological goals. Conducts autonomous explorations with AI (e.g., NetLogo simulations, open data).",
      critical:"Proposes adaptive configurations of AI + local ecosystems for transformative change. Constructs new ecological hypotheses in dialogue with AI." },
    { title:"Designing AI & Exploration (G6)",
      basic:"Recognizes AI-generated content.",
      intermediate:"Identifies basic features and potential biases of AI-generated content.",
      advanced:"Co-constructs stories or simulations using AI-generated content. Designs simple AI-assisted activities.",
      critical:"Critically evaluates and creatively appropriates AI-generated content for complex ecological storytelling and problem-solving. Co-designs AI tools for environmental purposes, understanding their ethical, ecological, and societal implications." },
    { title:"AI-Generated Content & Simulations (EcoAI Specific)",
      basic:"Can identify if content (text, image) is AI-generated.",
      intermediate:"Can identify basic biases or inaccuracies in AI-generated content.",
      advanced:"Critically analyzes AI-generated content for its ecological implications and potential biases.",
      critical:"Creatively uses AI-generated content to construct nuanced, ethically informed ecological narratives or solutions." },
    { title:"Situated Human‚ÄìAI Interaction (EcoAI Specific)",
      basic:"Interacts with AI tools in a classroom setting.",
      intermediate:"Uses AI-enabled sensors or tools in a specific environmental context (e.g., collecting data in a park).",
      advanced:"Collaborates with AI and environmental data to co-create a localized ecological understanding or solution.",
      critical:"Designs and leads projects involving situated human‚ÄìAI interaction that generates new ecological knowledge and fosters community engagement." },
    { title:"Pedagogical Experimentation with Digital Tools (EcoAI Specific)",
      basic:"Follows instructions to use a new digital tool for a learning task.",
      intermediate:"Explores different features of a digital tool to see how it can support an ecological project.",
      advanced:"Adapts the use of digital tools based on observed outcomes and reflects on their pedagogical effectiveness.",
      critical:"Leads the design and implementation of pedagogical experiments with digital tools, critically evaluating their sociomaterial impact on learning and ecological outcomes." },
    { title:"Multimodal Approaches & Creativity (EcoAI Specific)",
      basic:"Uses one mode (e.g., text) to describe an environmental issue.",
      intermediate:"Combines two modes (e.g., text and image) to present an ecological concept.",
      advanced:"Integrates multiple modes (e.g., text, image, sound, interactive elements) with AI assistance to create a comprehensive ecological narrative.",
      critical:"Innovatively uses multimodal AI tools to express complex, nuanced ecological ideas, fostering new forms of understanding and engagement for diverse audiences." }
  ]);

  const RUBRIC_IDENTITY = tbl([
    { title:"Agency (G7) & Critiquing/Designing AI",
      basic:"Feels involved in environmental problems. Recognizes the existence of AI and ecological technologies.",
      intermediate:"Uses AI tools for sustainable purposes. Begins to connect personal actions to broader environmental impacts.",
      advanced:"Plans collective AI-assisted actions. Co-designs environmental scenarios and solutions with AI.",
      critical:"Activates transformative processes and supports others (peer agency) in eco-digital contexts, demonstrating leadership in co-agency with AI for sustainable change." },
    { title:"Values (G11) & Critiquing AI",
      basic:"Recognizes ecological values in self and others. Expresses personal visions of the future.",
      intermediate:"Discusses ethical dilemmas on AI use. Compares future scenarios generated by AI.",
      advanced:"Justifies choices with ecological justice values. Co-constructs future stories or simulations, considering diverse perspectives.",
      critical:"Integrates values into educational and algorithmic environments, demonstrating a posthuman relational ethic where care extends to human, non-human, and algorithmic entities. Evaluates dystopian/utopian futures and proposes sustainable transformations, advocating for diverse, decolonized eco-digital imaginaries." },
    { title:"Ecodigital Positionality & Imaginaries (EcoAI Specific)",
      basic:"Expresses personal opinions on environmental or digital issues.",
      intermediate:"Identifies how personal experiences might influence views on AI or environment.",
      advanced:"Reflects on how personal and cultural positionality shapes perceptions of AI‚Äôs ecological impacts and future imaginaries.",
      critical:"Critically analyzes and challenges dominant techno-ecological imaginaries, proposing alternative narratives and designs that incorporate diverse, marginalized, or indigenous eco-digital perspectives." },
    { title:"Algorithmic Bias, Fairness & Representation (EcoAI Specific)",
      basic:"Recognizes that AI can contain errors or prejudices.",
      intermediate:"Identifies simple examples of algorithmic bias (e.g., in facial recognition).",
      advanced:"Collects evidence of algorithmic bias in eco-digital tools and proposes ways to mitigate it.",
      critical:"Guides campaigns or projects of algorithmic environmental justice, actively challenging anthropocentric biases in AI design and deployment to ensure equitable outcomes for human and nonhuman entities." },
    { title:"Post-Anthropocentric Identity (EcoAI Specific)",
      basic:"Views humans as separate from, but impacting, nature and technology.",
      intermediate:"Begins to see connections between human actions, AI, and environmental responses.",
      advanced:"Demonstrates a sense of interconnectedness with natural and technological systems, recognizing shared vulnerabilities and responsibilities.",
      critical:"Articulates a strong, embodied sense of post-anthropocentric identity, recognizing deep entanglement with non-human and algorithmic entities, and acting with a sense of distributed responsibility for systemic flourishing." }
  ]);

  function rubricBox(title, bodyHTML){
    return `
      <details class="mt-4 border border-green-200 rounded-lg bg-white shadow-sm">
        <summary class="cursor-pointer px-4 py-3 font-semibold text-green-800 flex items-center justify-between">
          <span>Rubric ‚Äî ${title}</span>
          <span class="text-gray-500">‚ñº</span>
        </summary>
        <div class="px-5 pb-5 pt-3">${bodyHTML}</div>
      </details>
    `;
  }

  function tryInject(){
    const grid = document.getElementById('framework-grid');
    if(!grid || !grid.children || grid.children.length === 0) return false;
    const map = {
      "Systems Understanding": RUBRIC_SYSTEMS,
      "Ecological Understanding of AI": RUBRIC_ECOLOGICAL,
      "Tool-Based Learning": RUBRIC_TOOL,
      "Identity Formation": RUBRIC_IDENTITY
    };
    Array.from(grid.children).forEach(card => {
      const h = card.querySelector('h3, h2');
      if(!h) return;
      const title = (h.textContent || '').trim();
      if(map[title] && !card.querySelector('.domain-rubric-box')){
        const div = document.createElement('div');
        div.className = 'domain-rubric-box';
        div.innerHTML = rubricBox(title, map[title]);
        card.appendChild(div);
      }
    });
    return true;
  }

  // Hide old subdomain rubric immediately
  const style = document.createElement('style');
  style.textContent = '.toggle-rubric, .rubric-table { display:none !important; }';
  document.head.appendChild(style);

  window.addEventListener('load', () => {
    if (tryInject()) return;
    const mo = new MutationObserver(() => { if (tryInject()) mo.disconnect(); });
    mo.observe(document.body, { childList: true, subtree: true });
  });
})();
</script>
<<footer style="text-align:center; margin-top:40px; padding:20px; font-size:14px; background:#f8f9fa; border-top:1px solid #ddd;">
  <a href="/privacy.html">Privacy Policy</a> |
  <a href="/cookie.html">Cookie Policy</a> |
  <a href="/terms.html">Terms and Conditions</a> |
  <a href="#" id="open-consent">Privacy & Cookie Preferences</a>
</footer>

<!-- === Consent Modal EN === -->
<style>
  .consent-backdrop {position:fixed;inset:0;background:rgba(0,0,0,.5);display:none;z-index:9998;}
  .consent-modal {position:fixed;left:50%;bottom:24px;transform:translateX(-50%);max-width:720px;width:min(92vw,720px);
    background:#fff;color:#111;border-radius:12px;box-shadow:0 10px 30px rgba(0,0,0,.25);z-index:9999;font-family:system-ui,Arial,sans-serif;}
  .consent-hdr{padding:14px 16px;border-bottom:1px solid #e5e7eb;display:flex;align-items:center;}
  .consent-hdr h3{margin:0;font-size:16px;font-weight:700;}
  .consent-body{padding:12px 16px;font-size:14px;line-height:1.45;}
  .consent-body a{color:#166534;text-decoration:underline;}
  .consent-item{display:flex;gap:10px;align-items:flex-start;background:#f9fafb;border:1px solid #e5e7eb;border-radius:8px;padding:10px;margin-top:8px;}
  .consent-actions{padding:12px 16px;display:flex;gap:8px;border-top:1px solid #e5e7eb;}
  .btn{padding:10px 14px;border-radius:10px;border:1px solid transparent;cursor:pointer;font-weight:600;}
  .btn-primary{background:#15803d;color:#fff;}.btn-primary:hover{background:#166534;}
  .btn-outline{background:#fff;border-color:#d1d5db;}.btn-outline:hover{background:#f3f4f6;}
  .consent-hidden{display:none!important;}
</style>

<div id="consent-backdrop" class="consent-backdrop"></div>
<div id="consent-modal" class="consent-modal consent-hidden" role="dialog" aria-modal="true">
  <div class="consent-hdr"><h3>Privacy ‚Ä¢ Cookies ‚Ä¢ Terms</h3></div>
  <div class="consent-body">
    <p>This site uses only <b>technical cookies</b>. Please consult:
      <a href="privacy_en.html" target="_blank" rel="noopener">Privacy</a>,
      <a href="cookie_en.html" target="_blank" rel="noopener">Cookie</a>,
      <a href="terms_en.html" target="_blank" rel="noopener">Terms</a>.
    </p>
    <div class="consent-item">
      <input type="checkbox" checked disabled> <label>Technical cookies (necessary)</label>
    </div>
    <div class="consent-item">
      <input id="ck-analytics" type="checkbox"> <label>Analytics (non-essential)</label>
    </div>
    <div class="consent-item">
      <input id="ck-third" type="checkbox"> <label>Third-party / embeds</label>
    </div>
  </div>
  <div class="consent-actions">
    <button id="btn-accept-all" class="btn btn-primary">Accept all</button>
    <button id="btn-reject" class="btn btn-outline">Reject</button>
    <button id="btn-save" class="btn btn-outline">Save</button>
  </div>
</div>

<script>
(function(){
  const KEY="ecoai_consent";
  const modal=document.getElementById("consent-modal");
  const back=document.getElementById("consent-backdrop");
  const analytics=document.getElementById("ck-analytics");
  const third=document.getElementById("ck-third");

  function show(){ modal.classList.remove("consent-hidden"); back.style.display="block"; }
  function hide(){ modal.classList.add("consent-hidden"); back.style.display="none"; }
  function save(mode){
    localStorage.setItem(KEY, JSON.stringify({
      analytics: !!analytics.checked,
      third: !!third.checked,
      mode, ts: new Date().toISOString()
    }));
  }

  const state = JSON.parse(localStorage.getItem(KEY) || "null");
  if (!state) show(); else { analytics.checked = !!state.analytics; third.checked = !!state.third; }

  document.getElementById("btn-accept-all").onclick = () => { analytics.checked=true; third.checked=true; save("all"); hide(); };
  document.getElementById("btn-reject").onclick     = () => { analytics.checked=false; third.checked=false; save("reject"); hide(); };
  document.getElementById("btn-save").onclick       = () => { save("save"); hide(); };

  document.addEventListener("click", (e) => {
    if (e.target.id === "open-consent") { e.preventDefault(); show(); }
  });
})();
</script>
</body>
</html>
